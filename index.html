<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" />
  <title>واجهـة المعلـم الرقمـي</title>
  <meta name="description" content="موقع أ.محمد الغامدي - توثيق الجهود المهنية ونشر المحتوى التعليمي للطلاب.">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" />
  <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@300;400;500;600;700&display=swap" rel="stylesheet" />
  <style>
    /* ========================================= */
    /*   تنسيقات الهيدر التقني الجديد والمتحرك   */
    /* ========================================= */

    .tech-header {
  /* 1. تطبيق صورة الخلفية */
  background-image: url('images/header-bg.jpg'); /* <-- تأكد من أن اسم الصورة صحيح */
  background-size: cover; /* الخاصية السحرية لجعل الصورة متجاوبة */
  background-position: center center; /* لتركيز الصورة في المنتصف */
  
  /* 2. الحفاظ على التنسيقات الأساسية */
  color: white;
  text-align: center;
  padding: 2.5rem 1rem;
  position: relative; /* ضروري لطبقة الـ Overlay */
  border-bottom-left-radius: 25px;
  border-bottom-right-radius: 25px;
  box-shadow: 0 10px 30px rgba(93, 63, 211, 0.15);
  margin: 0;
  overflow: hidden;
  z-index: 1;
}

/* 3. (مهم جداً) إضافة طبقة لونية شفافة فوق الصورة */
.tech-header::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background-color: rgba(0, 0, 0, 0.3); /* طبقة سوداء بشفافية 30% */
  z-index: -1; /* وضع الطبقة خلف المحتوى ولكن فوق صورة الخلفية */
}

/* 4. التأكد من أن المحتوى يظهر فوق الطبقة الشفافة */
.tech-header .header-content {
  position: relative;
  z-index: 2; /* هذا موجود لديك بالفعل ولكن نتأكد منه */
}


    .tech-header .header-content {
      position: relative;
      z-index: 2;
    }

    .tech-header h1 {
      font-size: 2rem;
      font-weight: 800;
      margin: 0;
      text-shadow: 0 2px 5px rgba(0, 0, 0, 0.3);
    }

    .tech-header h2 {
      font-size: 1.4rem;
      font-weight: 700;
      margin: 0.5rem 0;
      color: rgba(255, 255, 255, 0.95);
      text-shadow: 0 1px 3px rgba(0, 0, 0, 0.2);
    }

    .tech-header p {
      font-size: 1.1rem;
      font-weight: 500;
      margin: 0.25rem 0 0.75rem 0;
      color: rgba(255, 255, 255, 0.9);
    }

    .tech-header span {
      font-size: 0.9rem;
      font-weight: 400;
      color: rgba(255, 255, 255, 0.8);
      display: block;
      max-width: 600px;
      margin: 0 auto;
    }

    .floating-icons {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      pointer-events: none;
    }

    .floating-icons i {
      color: rgba(255, 255, 255, 0.12);
      position: absolute;
      font-size: 2rem;
      animation: float 15s infinite ease-in-out;
    }

    .icon-1 { top: 15%; right: 5%; animation-delay: 0s; }
    .icon-2 { top: 60%; right: 10%; animation-delay: -5s; }
    .icon-3 { top: 40%; right: 20%; animation-delay: -10s; }
    .icon-4 { top: 15%; left: 5%; animation-delay: -2s; }
    .icon-5 { top: 60%; left: 10%; animation-delay: -7s; }
    .icon-6 { top: 40%; left: 20%; animation-delay: -12s; }

    @keyframes float {
      0% { transform: translateY(0px) rotate(0deg); }
      50% { transform: translateY(-20px) rotate(15deg); }
      100% { transform: translateY(0px) rotate(0deg); }
    }

    /* متغيرات الألوان للوضع النهاري */
    :root {
      --primary-100: #f3e8ff;
      --primary-200: #d5b8ff;
      --primary-300: #b58fff;
      --primary-400: #9a69e6;
      --primary-500: #7a43cc;
      --primary-600: #5e3399;
      --accent-teal: #14b8a6; /* <-- هذا هو اللون الأخضر المشرق (Teal) */
      --header-color:  #5D3FD3;
      --primary-soft-2: #E6E6FA;
      --primary-soft-1: #00B4D8;
      --notification-color: #E6E6FA;
      --text-dark: #2c2c3a;
      --text-light: #5a527f;
      --light-bg: #faf7ff;
      --green-100: #e8f5e9;
      --green-200: #c8e6c9;
      --green-300: #a5d6a7;
      --green-400: #81c784;
      --green-text: #2e7d32;
      --transition: all 0.3s cubic-bezier(0.25, 0.8, 0.25, 1);
      --card-bg: linear-gradient(to bottom, #ffffff, #faf7ff);
      --card-hover-bg: linear-gradient(to right, #ece2ff, #e6d9ff);
      --body-bg: #faf7ff;
      --body-bg-image: radial-gradient(circle at 90% 10%, rgba(122, 67, 204, 0.03) 0%, transparent 20%),
        radial-gradient(circle at 10% 90%, rgba(122, 67, 204, 0.03) 0%, transparent 20%);
      --toggle-btn-bg: rgba(255, 255, 255, 0.8);
    }

    /* متغيرات الألوان للوضع الليلي */
    body.dark-mode {
      --primary-100: #2a1a4a;
      --primary-200: #3d2a5c;
      --primary-300: #4f3a6e;
      --primary-400: #614a80;
      --primary-500: #735a92;
      --primary-600: #856aa4;
      --header-color: #5D3FD3;
      --primary-soft-2: #2a1a4a;
      --primary-soft-1: #00B4D8;
      --notification-color: #2a1a4a;
      --text-dark: #e0e0e0;
      --text-light: #b0b0b0;
      --light-bg: #1a1a2e;
      --green-100: #1a3a1a;
      --green-200: #2a4a2a;
      --green-300: #3a5a3a;
      --green-400: #4a6a4a;
      --green-text: #81c784;
      --card-bg: linear-gradient(to bottom, #2d2d44, #252536);
      --card-hover-bg: linear-gradient(to right, #3a2a5c, #352a54);
      --body-bg: #1a1a2e;
      --body-bg-image: radial-gradient(circle at 90% 10%, rgba(93, 63, 211, 0.1) 0%, transparent 20%),
        radial-gradient(circle at 10% 90%, rgba(93, 63, 211, 0.1) 0%, transparent 20%);
      --toggle-btn-bg: rgba(42, 26, 74, 0.8);
    }

    /* نظام الطبقات */
    .overlay-container {
      display: none;
    }
    
    /* أنماط الشعار المحسنة - خلفية بيضاء كاملة */
    .logo-header {
      background: #ffffff;
      padding: 15px 0;
      text-align: center;
      box-shadow: 0 2px 15px rgba(122, 67, 204, 0.15);
      position: relative;
      z-index: 1000;
      border-bottom: 2px solid var(--header-color);
    }
    
    .logo-header img {
      height: 80px;
      width: auto;
      transition: var(--transition);
      filter: drop-shadow(0 2px 4px rgba(122, 67, 204, 0.3));
    }
    
    .logo-header img:hover {
      transform: scale(1.05);
      filter: drop-shadow(0 3px 6px rgba(122, 67, 204, 0.4));
    }

    /* شريط الإشعارات المعدل */
    .notification-bar {
      background: linear-gradient(90deg, #ede9f2, #f7f5fa);
      color: var(--text-dark);
      padding: 8px 0;
      overflow: hidden;
      position: relative;
      width: 100%;
      box-shadow: 0 2px 10px rgba(122, 67, 204, 0.2);
      border-bottom: 1px solid rgba(106, 90, 205, 0.2);
      font-size: 0.9rem;
    }

    .notification-container {
      display: inline-block;
      white-space: nowrap;
      padding-right: 100%;
      animation: scroll 20s linear infinite;
      overflow: hidden;
      text-overflow: ellipsis;
      box-sizing: content-box;
    }

    .notification-container i {
      margin-left: 8px;
      margin-right: 6px;
      color: var(--header-color);
      animation: ring 4s 0.7s ease-in-out infinite;
      transform-origin: 50% 4px;
      font-size: 0.9rem;
    }

    @keyframes scroll {
      0% { 
        transform: translateX(0); 
      }
      100% { 
        transform: translateX(100%);
      }
    }

    @keyframes ring {
      0% { transform: rotate(0); }
      1% { transform: rotate(30deg); }
      3% { transform: rotate(-28deg); }
      5% { transform: rotate(34deg); }
      7% { transform: rotate(-32deg); }
      9% { transform: rotate(30deg); }
      11% { transform: rotate(-28deg); }
      13% { transform: rotate(26deg); }
      15% { transform: rotate(-24deg); }
      17% { transform: rotate(22deg); }
      19% { transform: rotate(-20deg); }
      21% { transform: rotate(18deg); }
      23% { transform: rotate(-16deg); }
      25% { transform: rotate(14deg); }
      27% { transform: rotate(-12deg); }
      29% { transform: rotate(10deg); }
      31% { transform: rotate(-8deg); }
      33% { transform: rotate(6deg); }
      35% { transform: rotate(-4deg); }
      37% { transform: rotate(2deg); }
      39% { transform: rotate(-1deg); }
      41% { transform: rotate(1deg); }
      43% { transform: rotate(0); }
      100% { transform: rotate(0); }
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      -webkit-tap-highlight-color: transparent;
    }

    body {
      font-family: 'Tajawal', sans-serif;
      background-color: var(--body-bg);
      color: var(--text-dark);
      line-height: 1.6;
      font-weight: 400;
      min-height: 100vh;
      padding-bottom: 3rem;
      background-image: var(--body-bg-image);
      transition: background-color 0.5s ease, color 0.5s ease;
    }

    /* الهيدر المعدل */
    header {
      background: linear-gradient(135deg, #0077B6 0%, #00B4D8 100%);
      color: white;
      text-align: center;
      padding: 0.5rem 1rem !important;
      position: relative;
      border-bottom-left-radius: 25px;
      border-bottom-right-radius: 25px;
      box-shadow: 0 8px 25px rgba(0, 119, 182, 0.4);
      margin-bottom: 2rem;
      user-select: none;
      overflow: hidden;
    }

    header::before {
      content: '';
      position: absolute;
      top: 0;
      right: 0;
      bottom: 0;
      left: 0;
      background: 
        radial-gradient(circle at 20% 50%, rgba(255, 255, 255, 0.2) 0%, transparent 20%),
        radial-gradient(circle at 80% 80%, rgba(255, 255, 255, 0.1) 0%, transparent 30%);
      pointer-events: none;
    }

    header h1,
    header p,
    .card-title,
    .section-title,
    .google-form-header {
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
      display: block;
    }

    header h1 {
      font-size: 1.6rem;
      margin-bottom: 0 !important;
      font-weight: 800;
      letter-spacing: -0.5px;
      text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
      position: relative;
    }

    header p {
      font-size: 0.95rem;
      opacity: 0.95;
      max-width: 800px;
      margin: 0 auto;
      font-weight: 400;
      letter-spacing: 0.6px;
      text-shadow: 0 1px 2px rgba(0, 0, 0, 0.2);
      margin-bottom: 0 !important;
    }

    .compact-date {
      background: rgba(255, 255, 255, 0.25);
      display: inline-block;
      padding: 6px 14px;
      border-radius: 25px;
      margin-top: 10px;
      font-size: 0.9rem;
      backdrop-filter: blur(5px);
      border: 1px solid rgba(255, 255, 255, 0.3);
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
      transition: var(--transition);
    }

    /* تنسيق جديد للوقت والتاريخ في موقعه الجديد */
    .compact-date.new-position {
      background: var(--notification-color);
      color: var(--text-dark);
      padding: 8px 18px;
      border-radius: 25px;
      font-size: 0.9rem;
      font-weight: 700;
      box-shadow: 0 4px 15px rgba(122, 67, 204, 0.2);
      border: 1px solid rgba(93, 63, 211, 0.1);
      position: static;
      transform: none;
      margin: 0 auto;
    }
    
    .compact-date.new-position:hover {
      transform: translateY(-3px);
      box-shadow: 0 6px 20px rgba(122, 67, 204, 0.3);
    }

    .compact-date .separator {
      margin: 0 8px;
      opacity: 0.8;
    }

    .container {
      max-width: 1200px;
      margin: 0 auto;
      padding: 0 1.5rem 3rem;
      display: flex;
      flex-wrap: wrap;
      gap: 2rem;
      justify-content: center;
    }

    /* ========================================= */
    /*     تعديلات حجم البطاقات المطلوبة        */
    /* ========================================= */
    .section-card {
      background: var(--card-bg);
      border-radius: 20px;
      box-shadow: 0 10px 25px rgba(122, 67, 204, 0.15);
      padding: 2rem 2rem 1.5rem;
      width: 350px;
      display: flex;
      flex-direction: column;
      user-select: none;
      transition: var(--transition);
      cursor: default;
     
      position: relative;
      overflow: hidden;
      border: 1px solid rgba(122, 67, 204, 0.1);
      /* إزالة الارتفاع الثابت لجعل الحجم طبيعي */
    }

    /* إضافة الشريط العلوي الأنيق باللون الأساسي للبطاقات الكبيرة فقط */
    .section-card::before {
      content: '';
      position: absolute;
      top: 0;
      right: 0;
      left: 0;
      height: 5px;
      background: var(--primary-500);
      border-radius: 2px 2px 0 0;
      transition: height 0.3s ease;
    }

    .section-card:hover::before {
      height: 6px;
    }

    .section-card:hover {
      box-shadow: 0 15px 35px rgba(122, 67, 204, 0.25);
      transform: translateY(-7px);
      border-color: rgba(122, 67, 204, 0.2);
    }

    /* ========================================= */
    /*   زر طي وفرد البطاقات (تصميم جديد شفاف)  */
    /* ========================================= */
    .section-title {
      font-size: 1.65rem;
      color: var(--primary-500);
      margin-bottom: 1.5rem;
      padding-right: 0.8rem;
      font-weight: 700;
      position: relative;
      letter-spacing: 0.5px;
      user-select: none;
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 0.8rem;
      text-shadow: 0 1px 2px rgba(122, 67, 204, 0.1);
    }

    /* تعديل العنصر الذي يحمل العنوان والأيقونة */
    .title-container {
      display: flex;
      align-items: center;
      gap: 0.8rem;
      flex: 1;
    }

    /* ========================================= */
    /*   إزالة الخلفيات الشفافة للأيقونات       */
    /* ========================================= */
    .section-icon {
      font-size: 1.5rem;
      color: var(--accent-teal);
      opacity: 0.8;
      transition: var(--transition);
      user-select: none;
      /* إزالة الخلفية الشفافة */
      background: none;
      width: auto;
      height: auto;
      display: flex;
      align-items: center;
      justify-content: center;
      border-radius: 0;
    }

    .section-title:hover .section-icon {
      opacity: 1;
      transform: scale(1.1) rotate(5deg);
      background: none;
      box-shadow: none;
    }

    .toggle-cards {
      background: transparent;
      color: var(--primary-500);
      border: 1px solid rgba(122, 67, 204, 0.3);
      width: 35px;
      height: 35px;
      border-radius: 50%;
      cursor: pointer;
      font-size: 1rem;
      transition: all 0.3s ease;
      display: flex;
      align-items: center;
      justify-content: center;
      margin-left: 15px;
      flex-shrink: 0;
      position: relative;
    }

    .toggle-cards:hover {
      background: rgba(122, 67, 204, 0.1);
      color: var(--primary-600);
      transform: scale(1.1);
      box-shadow: 0 3px 10px rgba(122, 67, 204, 0.2);
    }

    .toggle-cards i {
      transition: transform 0.4s cubic-bezier(0.68, -0.55, 0.27, 1.55);
    }

    .toggle-cards.collapsed i {
      transform: rotate(180deg);
    }

    .toggle-cards.collapsed {
      background: rgba(122, 67, 204, 0.1);
      color: var(--primary-600);
    }

    .section-title::after {
      content: "";
      position: absolute;
      bottom: -12px;
      right: 0;
      width: 70px;
      height: 4px;
      background: var(--accent-teal);
      border-radius: 4px;
      box-shadow: 0 0 10px var(--primary-soft-1);
      transition: width 0.3s ease;
    }

    .section-card:hover .section-title::after {
      width: 90px;
    }

    /* ========================================= */
    /*   تعديلات الحجم للقوالب المغلقة          */
    /* ========================================= */
    .cards-container {
  display: flex;
  flex-direction: column;
  gap: 1.2rem;
  margin-top: 0.8rem;
  overflow: hidden; /* تغيير مهم: لم نعد نحتاج للتمرير العمودي هنا */
  transition: max-height 0.7s ease-in-out; /* حركة أكثر سلاسة */
  
  /* الخدعة هنا: نعطي ارتفاعاً أقصى كبيراً جداً ليسمح للمحتوى بالتمدد كما يشاء */
  max-height: 2000px; /* <--- هذا هو مفتاح الحل */
}



.cards-container.collapsed {
  max-height: 0; /* عند الإغلاق، الارتفاع الأقصى صفر */
  margin-top: 0;
  overflow: hidden; /* ضروري لإخفاء المحتوى تماماً */
}



    .card {
      background: linear-gradient(to right, var(--primary-soft-2), var(--primary-100));
      border-radius: 16px;
      padding: 1.2rem 1.5rem;
      box-shadow: 0 4px 12px rgba(122, 67, 204, 0.1);
      border: 1.5px solid rgba(122, 67, 204, 0.15);
      display: flex;
      align-items: center;
      gap: 1.2rem;
      cursor: pointer;
      opacity: 0;
      transform: translateY(15px);
      animation: fadeSlideUp 0.5s forwards ease;
      transition: var(--transition);
      user-select: text;
      position: relative;
      overflow: hidden;
    }

    .card::before {
      content: '';
      position: absolute;
      top: 0;
      right: 0;
      bottom: 0;
      left: 0;
      background: linear-gradient(to right, rgba(122, 67, 204, 0.03), transparent);
      opacity: 0;
      transition: opacity 0.3s ease;
    }

    .card:hover {
      transform: translateY(-5px);
      box-shadow: 0 8px 20px rgba(122, 67, 204, 0.25);
      border-color: var(--primary-400);
      background: var(--card-hover-bg);
    }

    .card:hover::before {
      opacity: 1;
    }

    .card-icon {
      font-size: 1.7rem;
      color: var(--primary-500);
      min-width: 40px;
      text-align: center;
      transition: var(--transition);
      opacity: 0.9;
      user-select: none;
      text-shadow: 0 1px 2px rgba(122, 67, 204, 0.2);
    }

    .card:hover .card-icon {
      transform: scale(1.2) rotate(5deg);
      color: var(--primary-600);
      opacity: 1;
      text-shadow: 0 2px 4px rgba(122, 67, 204, 0.3);
    }

    .card-title {
      font-size: 1.15rem;
      font-weight: 600;
      color: var(--text-dark);
      transition: color 0.3s ease;
      word-break: break-word;
      display: flex;
      align-items: center;
      gap: 10px;
      position: relative;
      overflow: visible;
      white-space: normal;
      text-overflow: clip;
      flex: 1;
      min-width: 0;
    }

    .card:hover .card-title {
      color: var(--primary-600);
    }

    .nowrap-text {
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    .card-title .external-icon {
      font-size: 0.75em;
      color: var(--primary-500);
      margin-right: 5px;
      opacity: 0.8;
      transition: var(--transition);
      flex-shrink: 0;
    }

    .card:hover .external-icon {
      opacity: 1;
      color: var(--primary-600);
      transform: translateX(3px);
    }

    @keyframes fadeSlideUp {
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    .google-form-container {
      max-width: 850px;
      margin: 3rem auto;
      padding: 2.5rem;
      background: var(--card-bg);
      border-radius: 20px;
      box-shadow: 0 10px 25px rgba(122, 67, 204, 0.15);
      position: relative;
      overflow: hidden;
      border: 1px solid rgba(122, 67, 204, 0.1);
    }

    .google-form-container::before {
      content: '';
      position: absolute;
      top: 0;
      right: 0;
      left: 0;
      height: 5px;
      background: var(--primary-500);
      border-radius: 2px 2px 0 0;
    }
    
    .google-form-header {
      color: var(--primary-500);
      text-align: center;
      margin-bottom: 1.8rem;
      font-size: 1.6rem;
      position: relative;
      font-weight: 700;
    }
    
    .google-form-header::after {
      content: "";
      position: absolute;
      bottom: -12px;
      right: 50%;
      transform: translateX(50%);
      width: 70px;
      height: 4px;
      background: var(--primary-500);
      border-radius: 4px;
      box-shadow: 0 0 10px var(--primary-soft-1);
    }
    
    .google-form-footer {
      text-align: center;
      margin-top: 1.5rem;
      color: var(--text-light);
      font-size: 0.95rem;
    }

    .answers-link {
  display: block;
  text-align: center;
  margin: 25px auto;
  padding: 14px 25px;
  background: var(--accent-teal) !important; /* <--- تمت إضافة !important هنا */
  color: white !important; /* <--- إضافة احترازية للون النص */
  border-radius: 35px;
  text-decoration: none;
  font-weight: 700;
  width: fit-content;
  transition: var(--transition);
  box-shadow: 0 5px 15px rgba(20, 184, 166, 0.4);
  border: none !important; /* <--- إلغاء أي حدود قديمة */
  position: relative;
  overflow: hidden;
}


    .answers-link::before {
      content: '';
      position: absolute;
      top: 0;
      right: 0;
      left: 0;
      height: 2px;
      background: rgba(255, 255, 255, 0.3);
    }

    .answers-link:hover {
  background: #0d9488 !important; /* <--- تمت إضافة !important هنا */
  color: white !important;
  transform: translateY(-3px);
  box-shadow: 0 8px 20px rgba(20, 184, 166, 0.5);
}



    .answers-link i {
      margin-left: 10px;
      color: inherit;
    }

    .fade-in {
      opacity: 0;
      transform: translateY(20px);
      transition: opacity 0.6s ease, transform 0.6s ease;
    }

    .fade-in.visible {
      opacity: 1;
      transform: translateY(0);
    }

    /* ========================================= */
    /*   زر تبديل الوضع الليلي - ثابت في الهيدر  */
    /* ========================================= */
    .theme-toggle {
      position: absolute;
      top: 20px;
      right: 20px;
      background: rgba(255, 255, 255, 0.2);
      backdrop-filter: blur(10px);
      color: white;
      width: 50px;
      height: 50px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      z-index: 1000;
      box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
      transition: var(--transition);
      border: 1px solid rgba(255, 255, 255, 0.3);
    }

    .theme-toggle:hover {
      transform: scale(1.1);
      background: rgba(255, 255, 255, 0.3);
      box-shadow: 0 6px 20px rgba(0, 0, 0, 0.3);
    }

    body.dark-mode .theme-toggle {
      background: rgba(0, 0, 0, 0.2);
      color: #f0f0f0;
      border: 1px solid rgba(255, 255, 255, 0.1);
    }

    /* تحسينات الجوال الأساسية */
    @media (max-width: 1100px) {
      .container {
        justify-content: flex-start;
        gap: 1.5rem;
      }
    }

    @media (max-width: 900px) {
      .container {
        justify-content: center;
      }

      .section-card {
        width: 320px;
      }
    }

    @media (max-width: 700px) {
      .container {
        flex-direction: column;
        align-items: center;
        gap: 1.2rem;
      }

      .section-card {
        width: 95% !important;
        padding: 1.5rem 1.5rem 1rem !important;
        margin: 0 auto 1.2rem !important;
      }
      
      .card {
        padding: 1rem !important;
      }
      
      .google-form-container {
        width: 95% !important;
        padding: 1.5rem !important;
      }
      
      .google-form-container iframe {
        height: 600px !important;
      }

      .logo-header img {
        height: 60px;
      }

      .cards-container {
        gap: 1rem;
        margin-top: 0.5rem;
      }
      
      .notification-container {
        animation: scroll 10s linear infinite;
      }
    }

    @media (max-width: 480px) {
      header {
        padding: 1rem 0.8rem;
        border-bottom-left-radius: 20px;
        border-bottom-right-radius: 20px;
      }

      header h1 {
        font-size: 1.4rem !important;
        margin-bottom: 0.4rem !important;
      }
      
      header p {
        font-size: 0.85rem !important;
        line-height: 1.5 !important;
        margin-bottom: 0.4rem;
      }

      .compact-date {
        font-size: 0.8rem !important;
        padding: 5px 10px !important;
        white-space: nowrap;
        margin-top: 8px;
      }
      
      .compact-date .separator {
        margin: 0 5px !important;
      }

      .section-title {
        font-size: 1.4rem;
        margin-bottom: 1.2rem;
      }

      .section-icon {
        font-size: 1.3rem;
      }

      .card {
        padding: 1rem !important;
        border-radius: 14px;
      }

      .card-icon {
        font-size: 1.5rem;
        min-width: 35px;
      }

      .card-title {
        font-size: 1.05rem !important;
      }

      .logo-header {
        padding: 12px 0;
      }
      
      .logo-header img {
        height: 50px;
      }

      .notification-bar {
        font-size: 0.8rem;
        padding: 7px 0;
      }
      
      .notification-container i {
        font-size: 0.8rem;
        margin-left: 6px;
        margin-right: 4px;
      }
      
      .notification-container {
        animation: scroll 25s linear infinite;
      }

      .answers-link {
        padding: 12px 20px;
        font-size: 0.95rem;
      }

      .toggle-cards {
        width: 32px;
        height: 32px;
        font-size: 0.9rem;
      }
    }

    /* تحسين إضافي لزر الإجابات على الجوال */
    @media (max-width: 768px) {
      .answers-link {
        transform: none;
        border-width: 2px;
      }
    }

    /* تحسينات للهواتف ذات الشاشات الصغيرة جداً */
    @media (max-width: 360px) {
      .section-title {
        font-size: 1.3rem;
      }
      
      .section-icon {
        font-size: 1.2rem;
      }
      
      .card {
        padding: 0.9rem !important;
      }
      
      .card-icon {
        font-size: 1.4rem;
      }
      
      .container {
        padding: 0 1rem 2rem;
      }
      
      .notification-bar {
        font-size: 0.75rem;
        padding: 6px 0;
      }
    }
    
    /* إلغاء التموج الأبيض في الهيدر */
    header::before {
      content: none !important;
      background: none !important;
    }

    /* تحسينات خاصة للعرض الأفقي (landscape) */
    @media (max-width: 900px) and (orientation: landscape) {
      .container {
        flex-direction: row;
        flex-wrap: wrap;
        justify-content: center;
        gap: 1rem;
      }
      
      .section-card {
        width: calc(50% - 1rem) !important;
        min-height: auto;
        padding: 1.2rem 1rem 1rem !important;
      }
      
      .card-title {
        font-size: 1rem !important;
        white-space: normal;
        overflow: visible;
        text-overflow: clip;
        line-height: 1.4;
      }
      
      .card {
        padding: 0.8rem 1rem !important;
        min-height: 60px;
      }
      
      .card-icon {
        font-size: 1.3rem;
        min-width: 30px;
      }
      
      .cards-container {
        gap: 0.8rem;
      }
      
      .section-title {
        font-size: 1.3rem;
        margin-bottom: 1rem;
      }
      
      .section-icon {
        font-size: 1.2rem;
      }
      
      .google-form-container {
        padding: 1.5rem !important;
      }
      
      .google-form-container iframe {
        height: 400px !important;
      }
    }
    
    /* تحسينات إضافية للعرض الأفقي على شاشات صغيرة */
    @media (max-width: 700px) and (orientation: landscape) {
      .section-card {
        width: 100% !important;
      }
      
      header {
        padding: 0.8rem;
      }
      
      header h1 {
        font-size: 1.3rem !important;
      }
      
      header p {
        font-size: 0.8rem !important;
      }
      
      .compact-date {
        font-size: 0.75rem !important;
        padding: 4px 8px !important;
      }
    }
    
    /* تحسينات للعرض الأفقي على أجهزة iPad */
    @media (min-width: 768px) and (max-width: 1024px) and (orientation: landscape) {
      .container {
        gap: 1.5rem;
      }
      
      .section-card {
        width: calc(33.333% - 1.5rem) !important;
      }
    }
    /* شريط البحث الجديد */
    .search-container {
      max-width: 500px;
      margin: 0 auto 2rem;
      padding: 0 1.5rem;
      position: relative;
      z-index: 1001;
    }

    .search-box {
      position: relative;
      width: 100%;
    }

    .search-input {
      width: 100%;
      padding: 12px 50px 12px 20px;
      border: 2px solid rgba(122, 67, 204, 0.2);
      border-radius: 30px;
      font-size: 1rem;
      font-family: 'Tajawal', sans-serif;
      background: var(--light-bg);
      color: var(--text-dark);
      box-shadow: 0 4px 15px rgba(122, 67, 204, 0.1);
      transition: var(--transition);
      outline: none;
      position: relative;
      z-index: 1002;
    }

    .search-input:focus {
      border-color: var(--primary-500);
      box-shadow: 0 6px 20px rgba(122, 67, 204, 0.2);
      padding-right: 55px;
    }

    .search-button {
      position: absolute;
      left: 10px;
      top: 50%;
      transform: translateY(-50%);
      background: var(--primary-500);
      color: white;
      border: none;
      width: 36px;
      height: 36px;
      border-radius: 50%;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: var(--transition);
      z-index: 1003;
    }

    .search-button:hover {
      background: var(--primary-600);
      transform: translateY(-50%) scale(1.05);
    }

    .search-results {
      position: absolute;
      top: 100%;
      left: 0;
      right: 0;
      background: var(--light-bg);
      color: var(--text-dark);
      border-radius: 15px;
      box-shadow: 0 10px 25px rgba(122, 67, 204, 0.3);
      margin-top: 5px;
      z-index: 10000;
      max-height: 300px;
      overflow-y: auto;
      display: none;
    }

    .search-result-item {
      padding: 12px 20px;
      border-bottom: 1px solid rgba(122, 67, 204, 0.1);
      cursor: pointer;
      transition: var(--transition);
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .search-result-item:last-child {
      border-bottom: none;
    }

    .search-result-item:hover {
      background: var(--primary-soft-2);
    }

    .search-result-item i {
      color: var(--primary-500);
      font-size: 0.9rem;
    }

    .search-result-item span {
      flex: 1;
    }

    .no-results {
      padding: 15px 20px;
      text-align: center;
      color: var(--text-light);
    }

    @media (max-width: 700px) {
      .search-container {
        padding: 0 1rem;
        margin-bottom: 1.5rem;
      }
      
      .search-input {
        padding: 10px 45px 10px 15px;
        font-size: 0.95rem;
      }
      
      .search-button {
        width: 32px;
        height: 32px;
      }
    }

    @media (max-width: 480px) {
      .search-input {
        font-size: 0.9rem;
      }
      
      .search-results {
        max-height: 250px;
      }
      
      .search-result-item {
        padding: 10px 15px;
        font-size: 0.9rem;
      }
    }
    @media (max-width: 480px) {
      .responsive-header {
        height: 200px !important;
        min-height: 200px;
      }
      
      .compact-date {
        font-size: 0.8rem !important;
        padding: 6px 12px !important;
        max-width: 300px !important;
        bottom: 15px !important;
      }
    }

    @media (max-width: 360px) {
      .responsive-header {
        height: 180px !important;
      }
      
      .compact-date {
        font-size: 0.75rem !important;
        padding: 5px 10px !important;
      }
    }
    @media (max-width: 480px) {
      .responsive-header {
        height: 200px !important;
        object-position: center 25% !important;
      }
      
      .compact-date {
        font-size: 0.8rem !important;
        padding: 6px 15px !important;
        bottom: 10px !important;
        max-width: 300px !important;
      }
    }

    @media (max-width: 360px) {
      .responsive-header {
        height: 180px !important;
        object-position: center 20% !important;
      }
      
      .compact-date {
        font-size: 0.75rem !important;
        padding: 5px 12px !important;
      }
    }
    /* تصغير أكبر قليلاً للتاريخ والوقت على الجوال */
    @media (max-width: 768px) {
      #hijri-date, #gregorian-date, #live-time {
        font-size: 0.75rem;
      }
      .compact-date.new-position {
        padding: 6px 15px;
      }
    }
    /* الهيدر في الوضع الأفقي */
    @media screen and (max-height: 500px) and (orientation: landscape) {
      header img.responsive-header {
        height: 160px !important;
        max-height: 160px !important;
      }

      .compact-date {
        font-size: 0.9rem !important;
        padding: 4px 10px !important;
      }
    }
    /* الهيدر العام */
    #header {
      height: 200px;
      width: 100%;
      background-image: url('your-header-image.jpg');
      background-size: cover;
      background-position: center;
    }

    /* للهاتف بالوضع الأفقي */
    @media only screen and (max-width: 767px) and (orientation: landscape) {
      #header {
        height: 200px;
        background-size: cover;
        background-position: center;
      }
    }
    #header {
      height: 200px;
      overflow: hidden;
    }

    #header img {
      width: 100%;
      height: 100%;
      object-fit: cover;
      object-position: center;
    }
    /* أنماط قسم الذكاء الاصطناعي */
    .ai-assistant-container {
      max-width: 800px;
      margin: 3rem auto;
      padding: 2.5rem;
      background: var(--card-bg);
      border-radius: 20px;
      box-shadow: 0 10px 30px rgba(122, 67, 204, 0.2);
      position: relative;
      overflow: hidden;
      border: 1px solid rgba(122, 67, 204, 0.15);
    }

    .ai-assistant-container::before {
      content: '';
      position: absolute;
      top: 0;
      right: 0;
      left: 0;
      height: 5px;
      background: linear-gradient(90deg, #4285f4 0%, #34a853 33%, #fbbc05 66%, #ea4335 100%);
      border-radius: 2px 2px 0 0;
    }

    .ai-header {
      color: var(--primary-500);
      text-align: center;
      margin-bottom: 2rem;
      font-size: 1.7rem;
      position: relative;
      font-weight: 700;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 1rem;
    }

    .ai-icon {
      font-size: 2rem;
      background: linear-gradient(135deg, #4285f4, #34a853, #fbbc05, #ea4335);
      -webkit-background-clip: text;
      background-clip: text;
      -webkit-text-fill-color: transparent;
      animation: pulse 2s infinite;
    }

    @keyframes pulse {
      0% { transform: scale(1); }
      50% { transform: scale(1.1); }
      100% { transform: scale(1); }
    }

    .ai-description {
      text-align: center;
      color: var(--text-light);
      margin-bottom: 2rem;
      font-size: 1.1rem;
      line-height: 1.6;
    }
    .ai-chat-container {
      background: var(--light-bg);
      border-radius: 15px;
      padding: 1.5rem;
      box-shadow: 0 4px 15px rgba(122, 67, 204, 0.1);
      border: 1px solid rgba(122, 67, 204, 0.1);
      margin-bottom: 1.5rem;
    }

    .ai-messages {
      height: 300px;
      overflow-y: auto;
      margin-bottom: 1rem;
      padding: 1rem;
      background: var(--light-bg);
      border-radius: 10px;
      border: 1px solid rgba(122, 67, 204, 0.1);
    }

    .message {
      margin-bottom: 1rem;
      padding: 0.8rem 1rem;
      border-radius: 12px;
      max-width: 85%;
      word-wrap: break-word;
    }

    .user-message {
  background: var(--card-bg); /* استخدام خلفية البطاقات يعطي تناسقاً */
  color: var(--text-dark);
  margin-right: auto;
  border-bottom-right-radius: 4px;
  border: 1px solid rgba(0, 0, 0, 0.05); /* حدود خفيفة جداً */
  box-shadow: 0 2px 5px rgba(0, 0, 0, 0.05); /* ظل خفيف جداً */
}

/* تعديل بسيط للوضع الليلي */
body.dark-mode .user-message {
    border-color: rgba(255, 255, 255, 0.08);
}


    .ai-message {
  background: #f4f0ff; /* لون بنفسجي فاتح جداً ومريح للعين */
  color: var(--text-dark); /* التأكد من أن لون النص داكن وواضح */
  margin-left: auto;
  border: 1px solid rgba(122, 67, 204, 0.2); /* حدود أوضح قليلاً */
  border-bottom-left-radius: 4px;
  box-shadow: 0 3px 10px rgba(93, 63, 211, 0.1); /* ظل أنعم وأكثر انتشاراً */
}


    .ai-input-group {
      display: flex;
      gap: 0.5rem;
    }

    .ai-input {
      flex: 1;
      padding: 12px 15px;
      border: 2px solid rgba(122, 67, 204, 0.2);
      border-radius: 25px;
      font-size: 1rem;
      font-family: 'Tajawal', sans-serif;
      background: var(--light-bg);
      color: var(--text-dark);
      transition: var(--transition);
      outline: none;
    }

    .ai-input:focus {
      border-color: var(--primary-500);
      box-shadow: 0 0 0 3px rgba(122, 67, 204, 0.1);
    }

    .ai-send-btn {
      background: var(--primary-500);
      color: white;
      border: none;
      width: 50px;
      height: 50px;
      border-radius: 50%;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: var(--transition);
      font-size: 1.2rem;
    }

    .ai-send-btn:hover {
      background: var(--primary-600);
      transform: scale(1.05);
    }

    .ai-send-btn:disabled {
      background: var(--text-light);
      cursor: not-allowed;
      transform: none;
    }

    .ai-loading {
      display: none;
      text-align: center;
      color: var(--text-light);
      font-style: italic;
    }

    .ai-disclaimer {
      text-align: center;
      font-size: 0.85rem;
      color: var(--text-light);
      margin-top: 1rem;
      padding: 1rem;
      background: var(--green-100);
      border-radius: 10px;
      border: 1px solid var(--green-200);
    }

    .ai-disclaimer i {
      color: var(--green-text);
      margin-left: 0.5rem;
    }
    /* ================================================== */
    /*              تنسيقات تذييل الصفحـة (Footer)             */
    /* ================================================== */
    .site-footer {
      background: var(--light-bg);
      color: var(--text-light);
      padding: 2rem 1.5rem;
      text-align: center;
      margin-top: 3rem;
      border-top: 1px solid rgba(122, 67, 204, 0.1);
    }

    .footer-content {
      max-width: 1200px;
      margin: 0 auto;
    }

    .footer-links {
      margin-bottom: 1.5rem;
      display: flex;
      justify-content: center;
      align-items: center;
      gap: 2rem;
      flex-wrap: wrap;
    }

    .footer-link {
      color: var(--text-dark);
      text-decoration: none;
      font-weight: 600;
      font-size: 1rem;
      transition: var(--transition);
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }

    .footer-link:hover {
      color: var(--primary-500);
      transform: translateY(-2px);
    }

    .footer-link i {
      color: var(--primary-500);
    }

    .footer-copyright {
      font-size: 0.9rem;
    }
    /* هذا التنسيق يضمن أن وسم <p> داخل الهيدر يتوسط بشكل صحيح على جميع الشاشات */
    header p {
      display: block !important;
      margin: 0 auto !important;
      text-align: center !important;
    }
    /* تحسين ظل النص للعناوين في الهيدر */
    header h1 {
      text-shadow: 
        0 0 5px rgba(255, 255, 255, 0.7), 
        0 4px 8px rgba(0, 0, 0, 0.6);
    }

    header p {
      text-shadow: 
        0 0 3px rgba(255, 255, 255, 0.5), 
        0 2px 4px rgba(0, 0, 0, 0.4);
    }

    /* الصورة الشخصية في الهيدر */
    .profile-image {
      width: 120px;
      height: 120px;
      border-radius: 50%;
      border: 4px solid rgba(255, 255, 255, 0.3);
      margin: 0 auto 1rem;
      overflow: hidden;
      box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
      background: #f0f0f0;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .profile-image img {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }

    .profile-placeholder {
      width: 100%;
      height: 100%;
      background: linear-gradient(135deg, #5D3FD3 0%, #7B68EE 100%);
      display: flex;
      align-items: center;
      justify-content: center;
      color: white;
      font-size: 2.5rem;
    }
    /* === تعديل قوي لزر الإجابات باستخدام ID === */

#answersBtn {
  background: var(--accent-teal ) !important;
  color: white !important;
  box-shadow: 0 5px 15px rgba(20, 184, 166, 0.4) !important;
  border: none !important;
}

#answersBtn:hover {
  background: #0d9488 !important;
  color: white !important;
  box-shadow: 0 8px 20px rgba(20, 184, 166, 0.5) !important;
}
/* === تحسينات قسم الذكاء الاصطناعي (مؤشر الكتابة والرسوم المتحركة) === */

/* 1. تنسيق مؤشر الكتابة (النقاط الثلاث) */
.ai-typing-indicator {
  display: flex;
  align-items: center;
  padding: 10px 15px;
}

.ai-typing-indicator .dot {
  width: 8px;
  height: 8px;
  border-radius: 50%;
  background-color: var(--primary-400);
  margin: 0 3px;
  animation: typing-bounce 1.4s infinite ease-in-out both;
}

.ai-typing-indicator .dot:nth-child(1) { animation-delay: -0.32s; }
.ai-typing-indicator .dot:nth-child(2) { animation-delay: -0.16s; }

@keyframes typing-bounce {
  0%, 80%, 100% { transform: scale(0); }
  40% { transform: scale(1.0); }
}

/* 2. تأثير ظهور الرسائل الجديدة */
.message {
  /* ... خصائصك الحالية للرسالة ... */
  transform: scale(0.95);
  opacity: 0;
  transform-origin: bottom left;
  animation: pop-in 0.4s cubic-bezier(0.25, 0.8, 0.25, 1) forwards;
}

.user-message {
  /* ... خصائصك الحالية لرسالة المستخدم ... */
  transform-origin: bottom left; /* نقطة انطلاق الحركة من اليسار */
}

.ai-message {
  /* ... خصائصك الحالية لرسالة الذكاء الاصطناعي ... */
  transform-origin: bottom right; /* نقطة انطلاق الحركة من اليمين */
}

@keyframes pop-in {
  to {
    transform: scale(1);
    opacity: 1;
  }
}
/* === بداية تنسيقات قسم الاستفسارات الجديد === */

/* 1. حاوية الأزرار الرئيسية */
.inquiries-container {
  display: flex;
  justify-content: center;
  align-items: center;
  gap: 1rem; /* مسافة بين الزرين */
  padding: 2rem;
  margin: 2rem auto;
  flex-wrap: wrap; /* للسماح للزرين بالالتفاف على الجوال إذا لزم الأمر */
}

/* 2. التنسيق الأساسي المشترك للزرين */
.inquiry-btn {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  gap: 0.75rem; /* مسافة بين الأيقونة والنص */
  font-family: 'Tajawal', sans-serif;
  font-size: 1.1rem;
  font-weight: 700;
  padding: 0.9rem 1.8rem;
  border-radius: 50px; /* حواف دائرية بالكامل */
  text-decoration: none;
  border: 2px solid transparent;
  cursor: pointer;
  transition: all 0.3s ease;
  white-space: nowrap; /* لمنع التفاف النص */
}

.inquiry-btn i {
  font-size: 1.2em; /* تكبير الأيقونة قليلاً */
}

/* 3. تصميم الزر الأساسي (اطرح استفساراً) */
.inquiry-btn.primary {
  background-color: var(--accent-teal); /* استخدام اللون الأخضر المميز */
  color: white;
  box-shadow: 0 4px 15px rgba(20, 184, 166, 0.3);
}

.inquiry-btn.primary:hover {
  background-color: #0d9488; /* درجة أغمق عند التمرير */
  transform: translateY(-3px);
  box-shadow: 0 6px 20px rgba(20, 184, 166, 0.4);
}

/* 4. تصميم الزر الثانوي (عرض الإجابات) */
.inquiry-btn.secondary {
  background-color: transparent;
  color: var(--accent-teal); /* لون النص أخضر */
  border-color: var(--accent-teal); /* حدود خضراء */
}

.inquiry-btn.secondary:hover {
  background-color: rgba(20, 184, 166, 0.1); /* خلفية خضراء شفافة عند التمرير */
  transform: translateY(-3px);
}

/* 5. تنسيق النافذة المنبثقة (Modal) */

/* الطبقة المعتمة التي تغطي الشاشة */
.modal-overlay {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background-color: rgba(0, 0, 0, 0.6);
  display: flex;
  justify-content: center;
  align-items: center;
  z-index: 10000;
  opacity: 0;
  visibility: hidden;
  transition: opacity 0.3s ease, visibility 0.3s ease;
}

/* صندوق المحتوى الفعلي للنافذة */
.modal-content {
  background: var(--body-bg);
  padding: 2rem;
  border-radius: 15px;
  width: 90%;
  max-width: 700px; /* عرض أقصى للنافذة */
  max-height: 90vh; /* ارتفاع أقصى للنافذة */
  display: flex;
  flex-direction: column;
  box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
  position: relative;
  transform: scale(0.9);
  transition: transform 0.3s ease;
}

/* حالة الظهور للنافذة */
.modal-overlay.visible {
  opacity: 1;
  visibility: visible;
}

.modal-overlay.visible .modal-content {
  transform: scale(1);
}

/* زر الإغلاق (×) */
.modal-close-btn {
  position: absolute;
  top: 1rem;
  left: 1rem; /* تم وضعه في اليسار ليتناسب مع الواجهة العربية */
  background: none;
  border: none;
  font-size: 2rem;
  color: var(--text-light);
  cursor: pointer;
  line-height: 1;
}

/* هيدر النافذة المنبثقة */
.modal-header {
  text-align: center;
  margin-bottom: 1.5rem;
  border-bottom: 1px solid rgba(122, 67, 204, 0.2);
  padding-bottom: 1rem;
}

.modal-header h2 {
  color: var(--primary-500);
  font-size: 1.8rem;
}

.modal-header p {
  color: var(--text-light);
  font-size: 1rem;
}

/* نموذج جوجل المضمن داخل النافذة */
.modal-content iframe {
  flex-grow: 1; /* لجعل النموذج يملأ المساحة المتاحة */
  border: none;
}

/* === نهاية تنسيقات قسم الاستفسارات الجديد === */
/* === بداية تنسيقات زر نسخ رد الذكاء الاصطناعي === */

/* 1. نجعل حاوية الرسالة قادرة على احتواء الزر */
.ai-message {
  position: relative; /* ضروري لتحديد موضع الزر */
  padding-left: 45px; /* إضافة مساحة داخلية على اليسار لوضع الزر */
}

/* 2. تصميم زر النسخ نفسه */
.copy-btn {
  position: absolute;
  top: 10px;
  left: 10px; /* تم وضعه في اليسار ليتناسب مع الواجهة العربية */
  background: rgba(122, 67, 204, 0.15); /* خلفية بنفسجية شفافة */
  color: var(--primary-500); /* لون الأيقونة بنفسجي */
  border: none;
  width: 30px;
  height: 30px;
  border-radius: 8px;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 0.9rem;
  opacity: 0.5; /* جعله شبه شفاف في البداية */
  transition: opacity 0.3s ease, background-color 0.3s ease;
}

/* 3. إظهار الزر بوضوح عند تمرير الفأرة فوق الرسالة */
.ai-message:hover .copy-btn {
  opacity: 1;
}

/* 4. تغيير شكل الزر عند النقر عليه (لإعطاء تغذية راجعة) */
.copy-btn:active {
  transform: scale(0.95);
}

/* 5. (اختياري) تغيير الأيقونة بعد النسخ بنجاح */
.copy-btn .fa-check {
  color: #10b981; /* لون أخضر للنجاح */
  font-size: 1.1rem;
}

/* === نهاية تنسيقات زر نسخ رد الذكاء الاصطناعي === */
/* ============================================ */
/* ==========  تنسيقات شريط التميز   ========== */
/* ============================================ */

/* حاوية الشريط الرئيسية */
/* حاوية الشريط الرئيسية (النسخة النهائية المعدلة) */
.fame-bar-section {
  display: flex;
  flex-direction: column; /* <--- التغيير الأهم: يجعل العناصر تترتب عمودياً */
  align-items: center;   /* <--- يضمن توسيط كل العناصر أفقياً */
  gap: 1.5rem;           /* <--- مسافة بين العنوان وقائمة الطلاب */
  
  
  max-width: 900px;
  margin: 2rem auto 6rem auto;
  padding: 2rem; /* إضافة مساحة داخلية للمحتوى */
  background-color: rgba(122, 67, 204, 0.05); /* بنفسجي خفيف جداً وشفاف */
  border-radius: 15px; /* حواف دائرية ناعمة */
  border: 1px solid rgba(255, 255, 255, 0.1); /* إطار خفيف جداً للتحديد */
  box-shadow: 0 8px 30px rgba(122, 67, 204, 0.1); /* ظل ناعم جداً بلون بنفسجي خفيف */

}


/* عنوان الشريط (قائمة التميز) */
.fame-bar-title {
  display: flex;
  align-items: center;
  gap: 0.75rem;
  font-size: 1.1rem;
  font-weight: 700;
  color: var(--primary-600);
}

.fame-bar-title i {
  font-size: 1.5rem;
  color: #FFD700; /* لون ذهبي للوسام */
}

/* حاوية قائمة الطلاب */
.students-list {
  display: flex;
  align-items: center;
  gap: 0.5rem;
}

/* عنصر الطالب الواحد (الصورة + التفاصيل) */
.student-item {
  position: relative; /* مهم جداً لتحديد موضع التفاصيل */
  cursor: pointer;
}

/* صورة الطالب الدائرية */
.student-item img {
  width: 50px;
  height: 50px;
  border-radius: 50%;
  border: 3px solid white;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);
  object-fit: cover;
  display: block; /* لإزالة أي مسافات إضافية تحت الصورة */
  transition: transform 0.3s ease, box-shadow 0.3s ease;
}

/* صندوق معلومات الطالب (مخفي افتراضياً) */
.student-info {
  --info-box-bg: #4a2c7a;
  
  position: absolute;
  top: 130%;
  left: 50%;
  transform: translateX(-50%);
  background-color: var(--info-box-bg); /* <-- هذا هو السطر الصحيح الوحيد للخلفية */
  color: white;
  padding: 0.75rem 1rem;
  border-radius: 8px;
  width: 220px;
  text-align: center;
  box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
  z-index: 1005;
  
  opacity: 0;
  visibility: hidden;
  transition: opacity 0.3s ease, visibility 0.3s ease;
}


/* سهم صغير يشير للأسفل من صندوق المعلومات */
.student-info::after {
  content: '';
  position: absolute;
  bottom: 100%;
  left: 50%;
  transform: translateX(-50%);
  border-width: 6px;
  border-style: solid;
  border-color: transparent transparent var(--info-box-bg) transparent;
}


.student-info h4 {
  margin: 0 0 0.25rem 0;
  font-size: 1rem;
  font-weight: 600;
}

.student-info p {
  margin: 0;
  font-size: 0.85rem;
  opacity: 0.9;
}
w
/* --- التفاعل عند التمرير (للكمبيوتر) أو النقر (للجوال) --- */
.student-item:hover img,
.student-item:focus img, /* للنقر على الجوال */
.student-item:focus-within img { /* للنقر على الجوال */
  transform: scale(1.15); /* تكبير الصورة */
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.25);
}

.student-item:hover .student-info,
.student-item:focus .student-info, /* للنقر على الجوال */
.student-item:focus-within .student-info { /* للنقر على الجوال */
  opacity: 1; /* إظهار صندوق المعلومات */
  visibility: visible;
}

/* لجعل النقر يعمل على الجوال، نحتاج لإضافة tabindex */
.student-item {
    outline: none; /* لإخفاء الإطار الأزرق عند النقر */
}
/* ============================================ */
/* === تحسينات شريط التميز لشاشة الجوال === */
/* ============================================ */
@media (max-width: 768px) {

/* 1. تكبير حجم الصورة على الجوال */
.student-item img {
  width: 65px;
  height: 65px;
}

/* 2. تعديل موضع صندوق المعلومات ليتناسب مع الحجم الجديد */
.student-info {
  top: 115%; /* زيادة المسافة قليلاً من الأعلى */
}

}
/* ============================================ */
/* === تنسيق النص الإرشادي لقائمة التميز === */
/* ============================================ */
.info-toggle-btn {
  position: absolute;
  bottom: -15px;
  left: 50%;
  transform: translateX(-50%);
  
  width: 30px;
  height: 30px;
  border-radius: 50%;
  background: var(--accent-teal);
  color: white;
  border: 3px solid var(--light-bg);
  border-bottom-color: transparent;
  
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  
  font-size: 0.9rem;
  font-weight: bold;
  
  box-shadow: 
    0 4px 12px rgba(20, 184, 166, 0.4),
    0 0 0 2px rgba(255, 255, 255, 0.8) inset;
  
  transition: all 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
  z-index: 2;
}

/* تأثير التمرير (Hover) */
.info-toggle-btn:hover {
  background: #0d9488;
  transform: translateX(-50%) scale(1.2) rotate(90deg);
  box-shadow: 
    0 6px 18px rgba(20, 184, 166, 0.6),
    0 0 0 3px rgba(255, 255, 255, 0.9) inset;
}

/* تأثير النقر (Active) */
.info-toggle-btn:active {
  transform: translateX(-50%) scale(0.95);
  box-shadow: 
    0 2px 8px rgba(20, 184, 166, 0.3),
    0 0 0 3px rgba(255, 255, 255, 0.9) inset;
}

/* حالة النافذة المفتوحة */
.student-item.active .info-toggle-btn {
  background: #ff6b6b;
  transform: translateX(-50%) rotate(45deg);
}

.student-item.active .info-toggle-btn:hover {
  background: #ff5252;
  transform: translateX(-50%) rotate(135deg) scale(1.2);
}

/* تأثير بسيط للصورة عندما تكون النافذة مفتوحة */
.student-item.active img {
  transform: scale(1.05);
  box-shadow: 0 6px 20px rgba(93, 63, 211, 0.3);
}

/* تحسينات للجوال */
@media (max-width: 768px) {
  .info-toggle-btn {
    width: 35px;
    height: 35px;
    font-size: 1rem;
    bottom: -17px;
  }
  
  .info-toggle-btn:active {
    transform: translateX(-50%) scale(0.9);
  }
}

/* تأثير سلس لفتح وإغلاق النافذة */
.student-info {
  transition: 
    opacity 0.4s ease,
    visibility 0.4s ease,
    transform 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
  transform: translateX(-50%) translateY(-10px);
}

.student-item.active .student-info {
  transform: translateX(-50%) translateY(0);
}

/* تأثير تموج عند النقر على الزر */
.info-toggle-btn::after {
  content: '';
  position: absolute;
  top: 50%;
  left: 50%;
  width: 100%;
  height: 100%;
  background: rgba(255, 255, 255, 0.2);
  border-radius: 50%;
  transform: translate(-50%, -50%) scale(0);
  transition: transform 0.3s ease;
}

.info-toggle-btn:active::after {
  transform: translate(-50%, -50%) scale(1.5);
  opacity: 0;
}

/* تحسينات إضافية للصور */
.student-image {
  position: relative;
  overflow: hidden;
  border-radius: 50%;
  transition: transform 0.3s ease;
}

.student-image::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: linear-gradient(45deg, 
    rgba(93, 63, 211, 0.1) 0%,
    transparent 50%,
    rgba(20, 184, 166, 0.1) 100%);
  border-radius: 50%;
  opacity: 0;
  transition: opacity 0.3s ease;
  z-index: 1;
}

.student-item:hover .student-image::before {
  opacity: 1;
}

/* تأثير توهج للصور عند التمرير */
.student-item:hover img {
  filter: brightness(1.05);
}
.honors-subtitle {
  margin: -1rem 0 0 0; /* تقليل المسافة العلوية لتقريبه من العنوان */
  font-size: 0.9rem;
  color: var(--text-light); /* لون رمادي فاتح ليكون هادئاً */
  text-align: center;
}
/* ============================================ */
/* =  تعديل موقع النافذة لتنخفض أكثر  = */
/* ============================================ */

/* الحل الشامل لجميع النوافذ */
.student-info {
  top: 130% !important; /* زيادة المسافة من 110% إلى 130% */
  margin-top: 10px !important; /* مسافة إضافية */
}

/* للسهم الصغير الذي يشير للصورة */
.student-info::after {
  bottom: 100% !important;
}

/* إذا كانت نافذة SweetAlert2 */
.swal2-popup {
  margin-top: 20px !important;
}

/* إذا كانت نافذة المودال */
.modal-content {
  margin-top: 30px !important;
}

/* تحسين للجوال */
@media (max-width: 768px) {
  .student-info {
    top: 115% !important; /* أكثر انخفاضاً على الجوال */
  }
}
  </style>
</head>
<body>

<!-- زر تبديل الوضع الليلي -->
<button class="theme-toggle" id="themeToggle">
  <i class="fas fa-moon"></i>
</button>

<!-- قسم الشعار -->
<div class="logo-header fade-in">
  <img src="images/logo.png" alt="شعار الموقع التعليمي">
</div>

<!-- شريط الإشعارات المعدل - تم تقليل ارتفاعه -->
<div class="notification-bar fade-in">
  <div class="notification-container">
    <i class="fas fa-bell"></i>
    <span id="notificationContent">جاري تحميل الإشعارات...</span>
  </div>
</div>

<!-- === بداية الهيدر الجديد والمحسّن === -->
<header class="tech-header fade-in">
  <div class="header-content">
    <!-- الصورة الشخصية -->
    <!-- الصورة الشخصية -->
<div class="profile-image">
  <img src="images/mh.jpeg" alt="صورة أ. محمد الغامدي">
</div>

    
    <h1>واجهـة المعلـم الرقمـي</h1>
    <h2>أ. محمد حمدان الغامدي</h2>
    <p>معلم التقنية الرقمية</p>
    <span> جهود مهنية ومحتوى تعليمي لجيل مبدع</span>
  </div>
 
</header>
<!-- === نهاية الهيدر الجديد والمحسّن === -->

<!-- الوقت والتاريخ الجديد فوق خانة البحث -->
<div class="date-time-container fade-in" style="text-align: center; margin-bottom: 10px; margin-top: 20px;">
  <div class="compact-date new-position" dir="rtl">
    <i class="fas fa-calendar-alt" style="color: var(--primary-500); margin-left: 5px;"></i><span id="hijri-date"></span> 
    <span class="separator" style="color: var(--primary-500); margin: 0 4px; opacity: 0.7;">•</span>
    <span id="gregorian-date"></span>
    <span class="separator" style="color: var(--primary-500); margin: 0 4px; opacity: 0.7;">•</span>
    <i class="fas fa-clock" style="color: var(--primary-500); margin-left: 5px;"></i><span id="live-time"></span>
  </div>
</div>

<!-- شريط البحث الجديد -->
<div class="search-container fade-in" style="margin-top: 0px !important;">
  <div class="search-box">
    <input type="text" class="search-input" placeholder="ابحث في المحتوى التعليمي..." id="searchInput">
    <button class="search-button" id="searchButton">
      <i class="fas fa-search"></i>
    </button>
    <div class="search-results" id="searchResults"></div>
  </div>
</div>
<!-- ============================================ -->
<!-- ==========   شريط التميز البسيط   ========== -->
<!-- ============================================ -->
<section class="fame-bar-section">
  <div class="fame-bar-title">
    <i class="fas fa-award"></i>
    <span>قائمة التميز</span>
  </div>
  <p class="honors-subtitle">   أنقر على الصور لمعرفة المزيد</p>
  <div class="students-list">

    <!-- الطالب الأول -->
    <!-- عنصر الطالب (النسخة الجديدة مع الزر) -->
    <div class="student-item">
      <div class="student-image">
        <img src="images/mh.jpeg" alt="الطالب المتميز">
      </div>
      
      <!-- هذا الزر موجود بالفعل في كودك -->
      <button class="info-toggle-btn" aria-label="إظهار المعلومات">
        <i class="fas fa-plus"></i>
      </button>
      
      <div class="student-info">
        <h4 class="student-name">اسم الطالب الأول</h4>
        <p class="student-reason">التميز في مشروع الوحدة الأولى.</p>
      </div>
    </div>


    <!-- الطالب الثاني -->
    <!-- عنصر الطالب (النسخة الجديدة مع الزر) -->
    <div class="student-item">
      <div class="student-image">
        <img src="images/mh.jpeg" alt="الطالب المتميز">
      </div>
      
      <!-- هذا الزر موجود بالفعل في كودك -->
      <button class="info-toggle-btn" aria-label="إظهار المعلومات">
        <i class="fas fa-plus"></i>
      </button>
      
      <div class="student-info">
        <h4 class="student-name">اسم الطالب الأول</h4>
        <p class="student-reason">التميز في مشروع الوحدة الأولى.</p>
      </div>
    </div>


    <!-- الطالب الثالث -->
    <!-- عنصر الطالب (النسخة الجديدة مع الزر) -->
    <div class="student-item">
      <div class="student-image">
        <img src="images/mh.jpeg" alt="الطالب المتميز">
      </div>
      
      <!-- هذا الزر موجود بالفعل في كودك -->
      <button class="info-toggle-btn" aria-label="إظهار المعلومات">
        <i class="fas fa-plus"></i>
      </button>
      
      <div class="student-info">
        <h4 class="student-name">اسم الطالب الأول</h4>
        <p class="student-reason">التميز في مشروع الوحدة الأولى.</p>
      </div>
    </div>

  </div>
</section>
<!-- ============================================ -->
<!-- ========== نهاية شريط التميز البسيط ========== -->
<!-- ============================================ -->

<div class="container">
  <!-- معلومات عامة -->
  <section class="section-card fade-in">
    <div class="section-title">
      <div class="title-container">
        <i class="fas fa-info-circle section-icon"></i>
        <span>معلومات عامة</span>
      </div>
      <button class="toggle-cards" data-target="info-cards" title="طي/فتح">
        <i class="fas fa-chevron-up"></i>
      </button>
    </div>
    <div class="cards-container collapsed" id="info-cards">
      <div class="card" style="animation-delay: 0.05s;" data-url="https://sites.google.com/view/qws2/%D8%A3%D9%87%D8%AF%D8%A7%D9%81-%D8%B3%D9%8A%D8%A7%D8%B3%D8%A9-%D8%A7%D9%84%D8%AA%D8%B9%D9%84%D9%8A%D9%85-%D8%A8%D8%A7%D9%84%D9%85%D9%85%D9%84%D9%83%D8%A9?authuser=1">
        <i class="fas fa-bullseye card-icon"></i>
        <h3 class="card-title">أهداف التعليم</h3>
      </div>
      <div class="card" style="animation-delay: 0.1s;" data-url="https://sites.google.com/view/afsw/%D9%85%D9%8A%D8%AB%D8%A7%D9%82-%D8%A3%D8%AE%D9%84%D8%A7%D9%82%D9%8A%D8%A7%D8%AA-%D9%85%D9%87%D9%86%D8%A9-%D8%A7%D9%84%D8%AA%D8%B9%D9%84%D9%8A%D9%85?authuser=1">
        <i class="fas fa-scroll card-icon"></i>
        <h3 class="card-title">ميثاق مهنة التعليم</h3>
      </div>
      <div class="card" style="animation-delay: 0.15s;" data-url="https://sites.google.com/view/werzz/%D8%A7%D9%84%D8%A3%D9%87%D8%AF%D8%A7%D9%81-%D8%A7%D9%84%D9%88%D8%B8%D9%8A%D9%81%D9%8A%D8%A9?authuser=1">
        <i class="fas fa-bullhorn card-icon"></i>
        <h3 class="card-title">الأهداف الوظيفية</h3>
      </div>
      <div class="card" style="animation-delay: 0.2s;" data-url="https://sites.google.com/view/wsffew/%D8%B1%D8%A4%D9%8A%D8%A9-%D9%88%D8%B1%D8%B3%D8%A7%D9%84%D8%A9-%D8%A7%D9%84%D9%85%D8%B9%D9%84%D9%85?authuser=1">
        <i class="fas fa-eye card-icon"></i>
        <h3 class="card-title">رؤية ورسالة المعلم</h3>
      </div>
      <div class="card" style="animation-delay: 0.25s;" data-url="https://sites.google.com/view/retgv3/%D8%B1%D8%A4%D9%8A%D8%A9-%D9%88%D8%B1%D8%B3%D8%A7%D9%84%D8%A9-%D8%A7%D9%84%D9%85%D8%AF%D8%B1%D8%B3%D8%A9?authuser=1">
        <i class="fas fa-school card-icon"></i>
        <h3 class="card-title">رؤية المدرسة</h3>
      </div>
      <div class="card" style="animation-delay: 0.3s;" data-url="https://sites.google.com/view/ererwq6/%D9%85%D9%87%D8%A7%D9%85-%D8%A7%D9%84%D9%85%D8%B9%D9%84%D9%85-%D9%88%D9%88%D8%A7%D8%AC%D8%A8%D8%A7%D8%AA%D8%A9?authuser=1">
        <i class="fas fa-tasks card-icon"></i>
        <h3 class="card-title">مهام المعلم </h3>
      </div>
      <div class="card" style="animation-delay: 0.35s;" data-url="https://sites.google.com/view/we3rt/home?authuser=1">
        <i class="fas fa-user card-icon"></i>
        <h3 class="card-title">السيرة الذاتية</h3>
      </div>
      <div class="card" style="animation-delay: 0.4s;" data-url="https://sites.google.com/view/3534rf/home?authuser=1">
        <i class="fas fa-graduation-cap card-icon"></i>
        <h3 class="card-title">المؤهل والخبرات</h3>
      </div>
    </div>
  </section>

  <!-- التنمية المهنية -->
  <section class="section-card fade-in">
    <div class="section-title">
      <div class="title-container">
        <i class="fas fa-briefcase section-icon"></i>
        <span>التنمية المهنية</span>
      </div>
      <button class="toggle-cards" data-target="dev-cards" title="طي/فتح">
        <i class="fas fa-chevron-up"></i>
      </button>
    </div>
    <div class="cards-container collapsed" id="dev-cards">
      <div class="card" style="animation-delay: 0.05s;" data-url="https://sites.google.com/view/aser2w/home?authuser=1">
        <i class="fas fa-chalkboard-teacher card-icon"></i>
        <h3 class="card-title">الدورات التدريبية</h3>
      </div>
      <div class="card" style="animation-delay: 0.1s;" data-url="https://sites.google.com/view/erfedf43/m?authuser=1">
        <i class="fas fa-award card-icon"></i>
        <h3 class="card-title">الإنجازات</h3>
      </div>
    </div>
  </section>

  <!-- التطوير المهني -->
  <section class="section-card fade-in">
    <div class="section-title">
      <div class="title-container">
        <i class="fas fa-sync-alt section-icon"></i>
        <span>التطوير المهني</span>
      </div>
      <button class="toggle-cards" data-target="pro-cards" title="طي/فتح">
        <i class="fas fa-chevron-up"></i>
      </button>
    </div>
    <div class="cards-container collapsed" id="pro-cards">
      <div class="card" style="animation-delay: 0.05s;" data-url="https://sites.google.com/view/edsww2/%D8%AA%D8%A8%D8%A7%D8%AF%D9%84-%D8%A7%D9%84%D8%B2%D9%8A%D8%A7%D8%B1%D8%A7%D8%AA?authuser=1">
        <i class="fas fa-exchange-alt card-icon"></i>
        <h3 class="card-title">تبادل الزيارات</h3>
      </div>
      <div class="card" style="animation-delay: 0.1s;" data-url="https://sites.google.com/view/wafe23/%D8%A7%D9%84%D9%85%D8%AC%D8%AA%D9%85%D8%B9%D8%A7%D8%AA-%D8%A7%D9%84%D9%85%D9%87%D9%86%D9%8A%D8%A9?authuser=1">
        <i class="fas fa-users-cog card-icon"></i>
        <h3 class="card-title">المجتمعات المهنية</h3>
      </div>
    </div>
  </section>

  <!-- التكريم والجوائز -->
<section class="section-card fade-in">
  <div class="section-title">
    <div class="title-container">
      <i class="fas fa-award section-icon"></i>
      <span>التكريم والجوائز</span>
    </div>
    <!-- === بداية الإضافة === -->
    <button class="toggle-cards" data-target="awards-cards" title="طي/فتح">
      <i class="fas fa-chevron-up"></i>
    </button>
    <!-- === نهاية الإضافة === -->
  </div>
  <!-- لاحظ إضافة الـ id هنا -->
  <div class="cards-container" id="awards-cards">
    <div class="card" style="animation-delay: 0.05s;" data-url="https://sites.google.com/view/sf56/%D8%A7%D9%84%D8%AA%D9%83%D8%B1%D9%8A%D9%85-%D9%88%D8%A7%D9%84%D8%AC%D9%88%D8%A7%D8%A6%D8%B2?authuser=1">
      <i class="fas fa-trophy card-icon"></i>
      <h3 class="card-title">التكريم والجوائز</h3>
    </div>
  </div>
</section>


  <!-- العمل التعليمي -->
  <section class="section-card fade-in">
    <div class="section-title">
      <div class="title-container">
        <i class="fas fa-chalkboard section-icon"></i>
        <span>العمل التعليمي</span>
      </div>
      <button class="toggle-cards" data-target="edu-cards" title="طي/فتح">
        <i class="fas fa-chevron-up"></i>
      </button>
    </div>
    <div class="cards-container collapsed" id="edu-cards">
      <div class="card" style="animation-delay: 0.05s;" data-url="https://sites.google.com/view/sa32sa2/%D8%A3%D9%87%D8%AF%D8%A7%D9%81-%D8%AA%D8%B9%D9%84%D9%8A%D9%85-%D8%A7%D9%84%D9%85%D8%A7%D8%AF%D8%A9?authuser=1">
        <i class="fas fa-bullseye card-icon"></i>
        <h3 class="card-title">أهداف تعليم المادة</h3>
      </div>
      <div class="card" style="animation-delay: 0.1s;" data-url="https://sites.google.com/view/sacsd/dc?authuser=1">
        <i class="fas fa-calendar-alt card-icon"></i>
        <h3 class="card-title">جدول الحصص</h3>
      </div>
      <div class="card" style="animation-delay: 0.15s;" data-url="https://sites.google.com/view/erferx/%D8%AA%D9%88%D8%B2%D9%8A%D8%B9-%D8%A7%D9%84%D9%85%D9%86%D9%87%D8%AC?authuser=1">
        <i class="fas fa-book card-icon"></i>
        <h3 class="card-title">توزيع المنهج</h3>
      </div>
      <div class="card" style="animation-delay: 0.2s;" data-url="https://sites.google.com/view/sdf6664rf/fg?authuser=1">
        <i class="fas fa-calendar-week card-icon"></i>
        <h3 class="card-title">الخطة الزمنية</h3>
      </div>
      <div class="card" style="animation-delay: 0.25s;" data-url="https://sites.google.com/view/dfgtte2/%D8%AA%D8%AD%D8%B6%D9%8A%D8%B1-%D8%A7%D9%84%D9%85%D9%86%D8%B5%D8%A9?authuser=1">
        <i class="fas fa-chalkboard card-icon"></i>
        <h3 class="card-title">تحضير المنصة</h3>
      </div>
      <div class="card" style="animation-delay: 0.3s;" data-url="https://sites.google.com/view/dvfdg78/%D8%A7%D9%84%D9%88%D8%A7%D8%AC%D8%A8%D8%A7%D8%AA?authuser=1">
        <i class="fas fa-tasks card-icon"></i>
        <h3 class="card-title">الواجبات</h3>
      </div>
      <div class="card" style="animation-delay: 0.35s;" data-url="https://sites.google.com/view/dfgu55/%D8%B9%D8%B1%D9%88%D8%B6-%D8%AA%D9%82%D8%AF%D9%8A%D9%85%D9%8A%D8%A9?authuser=1">
        <i class="fas fa-file-powerpoint card-icon"></i>
        <h3 class="card-title">عروض تقديمية</h3>
      </div>
      <div class="card" style="animation-delay: 0.4s;" data-url="https://sites.google.com/view/sdgvt6/sw?authuser=1">
        <i class="fas fa-file-alt card-icon"></i>
        <h3 class="card-title">أوراق العمل</h3>
      </div>
      <div class="card" style="animation-delay: 0.45s;" data-url="https://sites.google.com/view/dvfdg33/ss?authuser=1">
        <i class="fas fa-lightbulb card-icon"></i>
        <h3 class="card-title">استراتيجيات حديثة</h3>
      </div>
      <div class="card" style="animation-delay: 0.5s;" data-url="https://sites.google.com/view/dfg6654e/we?authuser=1">
        <i class="fas fa-comments card-icon"></i>
        <h3 class="card-title">تفاعلات الطلاب</h3>
      </div>
      <div class="card" style="animation-delay: 0.55s;" data-url="https://sites.google.com/view/fghhny8/%D9%85%D8%B4%D8%A7%D8%B1%D9%8A%D8%B9-steam?authuser=1">
        <i class="fas fa-atom card-icon"></i>
        <h3 class="card-title">STEM</h3>
      </div>
      <div class="card" style="animation-delay: 0.6s;" data-url="https://sites.google.com/view/kjjhhjkl6/%D8%A7%D9%84%D9%85%D8%B3%D8%A7%D8%A8%D9%82%D8%A7%D8%AA?authuser=1">
        <i class="fas fa-medal card-icon"></i>
        <h3 class="card-title">المسابقات</h3>
      </div>
      <div class="card" style="animation-delay: 0.65s;" data-url="https://sites.google.com/view/sdsgdfsb6/ee?authuser=1">
        <i class="fas fa-school card-icon"></i>
        <h3 class="card-title">البيئة التعليمية</h3>
      </div>
      <div class="card" style="animation-delay: 0.7s;" data-url="https://sites.google.com/view/sdergrt7/xc?authuser=1">
        <i class="fas fa-laptop-code card-icon"></i>
        <h3 class="card-title">التقنية والتعليم</h3>
      </div>
    </div>
  </section>

  <!-- تقويم الطلاب -->
  <section class="section-card fade-in">
    <div class="section-title">
      <div class="title-container">
        <i class="fas fa-clipboard-list section-icon"></i>
        <span>تقويم الطلاب</span>
      </div>
      <button class="toggle-cards" data-target="eval-cards" title="طي/فتح">
        <i class="fas fa-chevron-up"></i>
      </button>
    </div>
    <div class="cards-container collapsed" id="eval-cards">
      <div class="card" style="animation-delay: 0.05s;" data-url="https://sites.google.com/view/ghgv54/q?authuser=1">
        <i class="fas fa-chart-line card-icon"></i>
        <h3 class="card-title">سجلات المتابعة</h3>
      </div>
      <div class="card" style="animation-delay: 0.1s;" data-url="https://sites.google.com/view/edsfvd45/aw?authuser=1">
        <i class="fas fa-check-circle card-icon"></i>
        <h3 class="card-title">الاختبارات</h3>
      </div>
      <div class="card" style="animation-delay: 0.15s;" data-url="https://sites.google.com/view/sdfcdrt66/zx?authuser=1">
        <i class="fas fa-chart-pie card-icon"></i>
        <h3 class="card-title">تحليل النتائج</h3>
      </div>
      <div class="card" style="animation-delay: 0.2s;" data-url="https://sites.google.com/view/sdfdrttr4/ed?authuser=1">
        <i class="fas fa-crown card-icon"></i>
        <h3 class="card-title">الطلاب المتفوقين</h3>
      </div>
      <div class="card" style="animation-delay: 0.25s;" data-url="https://sites.google.com/view/drhfbtrh55/bn?authuser=1">
        <i class="fas fa-user-friends card-icon"></i>
        <h3 class="card-title">الطلاب الضعاف</h3>
      </div>
    </div>
  </section>

<!-- مكتبة الطالب -->
<section class="section-card fade-in">
  <div class="section-title">
    <div class="title-container">
      <i class="fas fa-user-graduate section-icon"></i>
      <span>مكتبة الطالب</span>
    </div>
    <!-- === بداية الإضافة === -->
    <button class="toggle-cards" data-target="library-cards" title="طي/فتح">
      <i class="fas fa-chevron-up"></i>
    </button>
    <!-- === نهاية الإضافة === -->
  </div>
  <!-- لاحظ إضافة الـ id هنا -->
  <div class="cards-container" id="library-cards">
    <div class="card" style="animation-delay: 0.05s;" data-url="https://sites.google.com/view/dvdf55/ss?authuser=1">
      <i class="fas fa-book card-icon"></i>
      <h3 class="card-title nowrap-text">الأول ثانوي</h3>
    </div>
    <div class="card" style="animation-delay: 0.1s;" data-url="https://sites.google.com/view/dgvgrhbht76/hj?authuser=1">
      <i class="fas fa-book card-icon"></i>
      <h3 class="card-title nowrap-text">الثاني ثانوي</h3>
    </div>
    <div class="card" style="animation-delay: 0.15s;" data-url="https://sites.google.com/view/regf78/ut?authuser=1">
      <i class="fas fa-book card-icon"></i>
      <h3 class="card-title nowrap-text">الثالث ثانوي</h3>
    </div>
  </div>
</section>


 <!-- الاثراء التقني -->
<section class="section-card fade-in">
  <div class="section-title">
    <div class="title-container">
      <i class="fas fa-laptop-code section-icon"></i>
      <span>الاثراء التقني</span>
    </div>
    <!-- === بداية الإضافة === -->
    <button class="toggle-cards" data-target="tech-cards" title="طي/فتح">
      <i class="fas fa-chevron-up"></i>
    </button>
    <!-- === نهاية الإضافة === -->
  </div>
  <!-- لاحظ إضافة الـ id هنا -->
  <div class="cards-container" id="tech-cards">
    <div class="card" style="animation-delay: 0.05s;" data-url="https://sites.google.com/view/sdfgbdh77/wc?authuser=1">
      <i class="fas fa-code card-icon"></i>
      <h3 class="card-title">كتب التقنية</h3>
    </div>
    <div class="card" style="animation-delay: 0.1s;" data-url="https://sites.google.com/view/sdfgdf6/vm?authuser=1">
      <i class="fas fa-image card-icon"></i>
      <h3 class="card-title">إنفوجرافيك</h3>
    </div>
    <div class="card" style="animation-delay: 0.15s;" data-url="https://sites.google.com/view/sdfh77/rt?authuser=1">
      <i class="fas fa-video card-icon"></i>
      <h3 class="card-title">فيديوهات قصيرة</h3>
    </div>
  </div>
</section>



</div>

<!-- قسم مساعد الذكاء الاصطناعي -->
<div id="ai-assistant-section" class="ai-assistant-container fade-in">
  <h2 class="ai-header" style="display: flex; align-items: center; justify-content: center; gap: 1rem;">
    <i class="fas fa-robot ai-icon" style="margin-top: 0; align-self: center;"></i>
    <span>الذكاء الاصطناعي</span>
  </h2>
  
  <p class="ai-description">
    اسأل عن أي موضوع في التقنية الرقمية أو غيرها من المواضيع 
  </p>
  
  <div class="ai-chat-container">
    <div class="ai-messages" id="aiMessages">
      <div class="message ai-message">
        <strong>   مرحباً بك   :</strong>  أنا المساعد الرقمي للأستاذ محمد الغامدي، وشريكك في رحلة التعلم، تفضل بطرح سؤالك.
      </div>
    </div>
    
    <div class="ai-input-group">
      <input type="text" class="ai-input" id="aiInput" placeholder="أكتب سؤالك هنا..." maxlength="500">
      <button class="ai-send-btn" id="aiSendBtn">
        <i class="fas fa-paper-plane"></i>
      </button>
    </div>
    
  <!-- تم تعديل هذا العنصر ليصبح مؤشر كتابة -->
<div class="ai-typing-indicator" id="aiTypingIndicator" style="display: none;">
  <div class="dot"></div>
  <div class="dot"></div>
  <div class="dot"></div>
</div>

  
  <div class="ai-disclaimer">
    <i class="fas fa-info-circle"></i>
    ملاحظة: الإجابات تعتمد على المعرفة العامة للذكاء الاصطناعي وقد تحتاج لمراجعة المعلم للتأكد من دقتها
  </div>
</div>

<!-- === بداية قسم الاستفسارات الجديد (النموذج المنبثق) === -->

<!-- 1. حاوية الأزرار الرئيسية -->
<div class="inquiries-container fade-in">
  <button id="openInquiryModalBtn" class="inquiry-btn primary">
    <i class="fas fa-comment-dots"></i> اطرح استفساراً
  </button>
  <a href="https://docs.google.com/spreadsheets/d/14FqkF7e83_KW_Gd48G2OlRLIJYuaKYTPndo-qb5DjKo/edit?usp=sharing" target="_blank" class="inquiry-btn secondary">
    <i class="fas fa-list-alt"></i> عرض إجابات المعلم
  </a>
</div>

<!-- 2. هيكل النافذة المنبثقة (ستكون مخفية في البداية ) -->
<div id="inquiryModal" class="modal-overlay" style="display: none;">
  <div class="modal-content">
    <button id="closeInquiryModalBtn" class="modal-close-btn">&times;</button>
    
    <div class="modal-header">
      <h2>الاستفسارات التعليمية</h2>
      <p>هذا النموذج مخصص لاستفسارات الطلاب التعليمية</p>
    </div>

    <iframe 
      src="https://docs.google.com/forms/d/e/1FAIpQLScP82hCVuCxuIl_FBXQpZJyGbR6kWGVEuT2Y6oKNPm2TfIwcA/viewform?embedded=true" 
      width="100%" 
      height="500" 
      frameborder="0" 
      marginheight="0" 
      marginwidth="0"
      title="نموذج استفسارات الطلاب">
      جاري التحميل...
    </iframe>
  </div>
</div>

<!-- === نهاية قسم الاستفسارات الجديد === -->


<!-- ================================================== -->
<!--                  تذييل الصفحـة (Footer)                 -->
<!-- ================================================== -->
<footer class="site-footer">
  <div class="footer-content">
    <div class="footer-links">
      <!-- === بداية الإضافة === -->
      <a href="mailto:mfh713623@gmail.com" class="footer-link">
        <i class="fas fa-envelope"></i> البريد الإلكتروني
      </a>
      <!-- === نهاية الإضافة === -->
      
      <a href="#ai-assistant-section" class="footer-link">
        <i class="fas fa-robot"></i> مساعد الذكاء الاصطناعي
      </a>
    </div>
    <div class="footer-copyright">
      © 2026 جميع الحقوق محفوظة | واجهة المعلم الرقمي - أ. محمد الغامدي
    </div>
  </div>
</footer>


<script>
  // إزالة أي علامة تجزئة (#) من الرابط لمنع التمرير التلقائي
  if (window.location.hash) {
    history.replaceState(null, null, window.location.pathname);
  }

  // دالة تحديث التاريخ والوقت
  function updateCompactDate() {
    const now = new Date();
    
    // حل بسيط: طرح يوم واحد من التاريخ
    const correctedDate = new Date(now);
    correctedDate.setDate(correctedDate.getDate() - 1);
    
    const hijri = new Intl.DateTimeFormat('ar-SA-u-ca-islamic', {
      day: 'numeric',
      month: 'long'
    }).format(correctedDate);
    
    const gregorian = new Intl.DateTimeFormat('ar-EG', {
      day: 'numeric',
      month: 'numeric',
      year: 'numeric'
    }).format(now);
    
    const time = new Date().toLocaleTimeString('ar-EG', {
      hour: '2-digit',
      minute: '2-digit'
    });
    
    document.getElementById('hijri-date').textContent = hijri;
    document.getElementById('gregorian-date').textContent = gregorian;
    document.getElementById('live-time').textContent = time;
  }

  // جلب الإشعار من ملف GitHub
  function fetchNotification() {
    const notificationUrl = 'https://raw.githubusercontent.com/muhammad1937-web/teacher-injaz/refs/heads/main/notification.txt';
    const notificationContent = document.getElementById('notificationContent');
    
    const timestamp = new Date().getTime();
    const urlWithTimestamp = `${notificationUrl}?t=${timestamp}`;
    
    fetch(urlWithTimestamp)
      .then(response => {
        if (!response.ok) {
          throw new Error('فشل جلب الإشعار');
        }
        return response.text();
      })
      .then(text => {
        if (text.trim()) {
          notificationContent.textContent = text;
          
          // ضبط سرعة الحركة بناءً على طول النص
          adjustScrollSpeed(text.length);
        } else {
          notificationContent.textContent = "مرحباً بكم في واجهة المعلم الرقمي .. أ.محمد حمدان الغامدي";
          adjustScrollSpeed(50);
        }
      })
      .catch(error => {
        console.error('حدث خطأ:', error);
        notificationContent.textContent = "مرحباً بكم في واجهة المعلم الرقمي .. أ.محمد حمدان الغامدي";
        adjustScrollSpeed(50);
      });
  }

  // ضبط سرعة الحركة بناءً على طول النص
  function adjustScrollSpeed(textLength) {
    const container = document.querySelector('.notification-container');
    const baseDuration = 20;
    const additionalTimePerChar = 0.05;
    
    let duration = baseDuration + (textLength * additionalTimePerChar);
    duration = Math.min(duration, 60);
    
    container.style.animationDuration = `${duration}s`;
    
    // إعادة تشغيل التحريك
    container.style.animation = 'none';
    void container.offsetWidth;
    container.style.animation = `scroll ${duration}s linear infinite`;
  }

  // فتح الروابط في نافذة جديدة مع إضافة أيقونة
  document.querySelectorAll('.card[data-url]').forEach(card => {
    const externalIcon = document.createElement('i');
    externalIcon.className = 'fas fa-external-link-alt external-icon';
    card.querySelector('.card-title').appendChild(externalIcon);
    
    card.addEventListener('click', function(e) {
      if (this.dataset.url) {
        window.open(this.dataset.url, '_blank', 'noopener,noreferrer');
      }
    });
  });

  // التحديث كل ثانية للوقت
  updateCompactDate();
  setInterval(updateCompactDate, 1000);

  // تحديث الإشعار كل 5 دقائق
  fetchNotification();
  setInterval(fetchNotification, 5 * 60 * 1000);

  // إعادة تشغيل التحريك عند تغيير المحتوى
  const observer = new MutationObserver(function(mutations) {
    mutations.forEach(function(mutation) {
      if (mutation.type === 'characterData' || mutation.type === 'childList') {
        const content = document.getElementById('notificationContent');
        adjustScrollSpeed(content.textContent.length);
      }
    });
  });

  observer.observe(document.getElementById('notificationContent'), {
    characterData: true,
    childList: true,
    subtree: true
  });

  // تأثيرات الظهور عند التمرير
  function checkFadeElements() {
    const fadeElements = document.querySelectorAll('.fade-in');
    fadeElements.forEach(el => {
      const elementTop = el.getBoundingClientRect().top;
      const elementVisible = 150;
      if (elementTop < window.innerHeight - elementVisible) {
        el.classList.add('visible');
      }
    });
  }

  // إضافة مستمعي الأحداث
  window.addEventListener('scroll', () => {
    checkFadeElements();
  });

  // التحقق من العناصر عند تحميل الصفحة
  window.addEventListener('load', () => {
    checkFadeElements();
  });

  // وظائف البحث
  function initSearch() {
    const searchInput = document.getElementById('searchInput');
    const searchButton = document.getElementById('searchButton');
    const searchResults = document.getElementById('searchResults');
    
    // جمع جميع عناصر البحث
    const searchableItems = Array.from(document.querySelectorAll('.card'));
    
    // دالة البحث
    function performSearch() {
      const searchTerm = searchInput.value.trim().toLowerCase();
      
      if (searchTerm.length < 2) {
        searchResults.style.display = 'none';
        return;
      }
      
      // تصفية العناصر بناءً على نص البحث
      const filteredItems = searchableItems.filter(item => {
        const title = item.querySelector('.card-title').textContent.toLowerCase();
        return title.includes(searchTerm);
      });
      
      // عرض النتائج
      displayResults(filteredItems, searchTerm);
    }
    
    // عرض النتائج
    function displayResults(items, searchTerm) {
      searchResults.innerHTML = '';
      
      if (items.length === 0) {
        searchResults.innerHTML = '<div class="no-results">لا توجد نتائج مطابقة</div>';
      } else {
        items.forEach(item => {
          const title = item.querySelector('.card-title').textContent;
          const resultItem = document.createElement('div');
          resultItem.className = 'search-result-item';
          resultItem.innerHTML = `
            <i class="fas fa-external-link-alt"></i>
            <span>${title}</span>
          `;
          
          resultItem.addEventListener('click', () => {
            if (item.dataset.url) {
              window.open(item.dataset.url, '_blank', 'noopener,noreferrer');
            } else if (item.onclick) {
              item.onclick();
            }
            searchResults.style.display = 'none';
            searchInput.value = '';
          });
          
          searchResults.appendChild(resultItem);
        });
      }
      
      searchResults.style.display = 'block';
    }
    
    // إضافة مستمعي الأحداث
    searchInput.addEventListener('input', performSearch);
    searchButton.addEventListener('click', performSearch);
    
    // إخفاء نتائج البحث عند النقر خارجها
    document.addEventListener('click', (e) => {
      if (!searchInput.contains(e.target) && !searchResults.contains(e.target)) {
        searchResults.style.display = 'none';
      }
    });
    
    // البحث عند الضغط على Enter
    searchInput.addEventListener('keypress', (e) => {
      if (e.key === 'Enter') {
        performSearch();
      }
    });
  }

  // تهيئة البحث عند تحميل الصفحة
  initSearch();

  // مساعد الذكاء الاصطناعي Gemini
  function initAIAssistant() {
    const aiMessages = document.getElementById('aiMessages');
    const aiInput = document.getElementById('aiInput');
    const aiSendBtn = document.getElementById('aiSendBtn');
    const aiLoading = document.getElementById('aiLoading');

    // رابط الخادم الوسيط
    const API_URL = '/api/gemini';

    // زر مسح المحادثة
    function addClearButton() {
      const clearBtn = document.createElement('button');
      clearBtn.innerHTML = '<i class="fas fa-trash"></i> مسح المحادثة';
      clearBtn.style.cssText = `
        background: #ff4757;
        color: white;
        border: none;
        padding: 8px 15px;
        border-radius: 20px;
        cursor: pointer;
        font-size: 0.9rem;
        margin-bottom: 10px;
        transition: all 0.3s;
      `;
      clearBtn.onclick = clearConversation;
      
      aiMessages.parentNode.insertBefore(clearBtn, aiMessages);
    }

    // مسح المحادثة
    function clearConversation() {
      aiMessages.innerHTML = `
        <div class="message ai-message">
          <strong> الذكاء الاصطناعي:</strong> مرحباً! كيف يمكنني مساعدتك في مواضيع التقنية الرقمية أو أي موضوع آخر؟
        </div>
      `;
    }

    async function sendMessage() {
  const message = aiInput.value.trim();
  if (!message) return;

  addMessage(message, 'user');
  aiInput.value = '';
  aiSendBtn.disabled = true;

  // --- بداية التعديل ---
  const aiTypingIndicator = document.getElementById('aiTypingIndicator');
  aiTypingIndicator.style.display = 'flex'; // إظهار مؤشر "الكتابة"
  // --- نهاية التعديل ---

  const API_URL = '/api/gemini'; 

  try {
    const response = await fetch(API_URL, {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify({
        contents: [{
          parts: [{
            text: message
          }]
        }]
      })
    });

    if (!response.ok) {
      const errorData = await response.json();
      throw new Error(errorData.error || 'فشل في الاتصال بالخدمة');
    }

    const data = await response.json();
    
    if (data.candidates && data.candidates[0].content.parts[0].text) {
      const aiResponse = data.candidates[0].content.parts[0].text;
      addMessage(aiResponse, 'ai');
    } else {
      if (data.error) {
        throw new Error(data.error.message);
      }
      throw new Error('لم يتم الحصول على إجابة');
    }

  } catch (error) {
    addMessage(`عذراً، حدث خطأ: ${error.message}`, 'ai');
  } finally {
    // --- بداية التعديل ---
    aiTypingIndicator.style.display = 'none'; // إخفاء مؤشر "الكتابة" عند انتهاء كل شيء
    aiSendBtn.disabled = false;
    aiInput.focus(); // إعادة التركيز على مربع الإدخال
    // --- نهاية التعديل ---
  }
}


function addMessage(text, sender) {
  const messageDiv = document.createElement('div');
  messageDiv.className = `message ${sender}-message`;
  
  if (sender === 'user') {
    // رسالة المستخدم تبقى كما هي
    messageDiv.innerHTML = `<strong>أنت:</strong> ${text}`;
  } else {
    // --- بداية قسم رسالة الذكاء الاصطناعي ---

    // 1. ننشئ زر النسخ
    const copyBtn = document.createElement('button');
    copyBtn.className = 'copy-btn';
    copyBtn.title = 'نسخ الرد';
    copyBtn.innerHTML = "<i class='fas fa-copy'></i>";

    // 2. نضيف وظيفة النسخ عند النقر على الزر
    copyBtn.addEventListener('click', function() {
      navigator.clipboard.writeText(text).then(() => {
        copyBtn.innerHTML = "<i class='fas fa-check'></i>";
        
        setTimeout(() => {
          copyBtn.innerHTML = "<i class='fas fa-copy'></i>";
        }, 2000);
      }).catch(err => {
        console.error('فشل نسخ النص: ', err);
      });
    });

    // 3. ننشئ حاوية للنص لضمان التنسيق الصحيح
    const textContainer = document.createElement('div');
    
    // === هذا هو السطر الذي تم تصحيحه بشكل نهائي ===
    const formattedText = text.replace(/\n/g, '');
    textContainer.innerHTML = `<strong>الذكاء الاصطناعي:</strong>  
${formattedText}`;

    // 4. نضيف زر النسخ وحاوية النص إلى رسالة الذكاء الاصطناعي
    messageDiv.appendChild(copyBtn);
    messageDiv.appendChild(textContainer);
    
    // --- نهاية قسم رسالة الذكاء الاصطناعي ---
  }
  
  aiMessages.appendChild(messageDiv);
  aiMessages.scrollTop = aiMessages.scrollHeight;
}

    // إضافة زر المسح
    addClearButton();

    // إضافة مستمعي الأحداث
    aiSendBtn.addEventListener('click', sendMessage);
    aiInput.addEventListener('keypress', (e) => {
      if (e.key === 'Enter' && !e.shiftKey) {
        e.preventDefault();
        sendMessage();
      }
    });

    aiInput.addEventListener('input', () => {
      aiSendBtn.disabled = !aiInput.value.trim();
    });
  }

  // تهيئة المساعد عند تحميل الصفحة
  document.addEventListener('DOMContentLoaded', initAIAssistant);

  document.addEventListener('DOMContentLoaded', function() {
    setTimeout(function() {
      window.scrollTo(0, 0);
    }, 100);
  });

  // =========================================
  //    وظائف التحسينات الجديدة
  // =========================================

  // وظيفة تبديل الوضع الليلي والنهاري
  function initThemeToggle() {
    const themeToggle = document.getElementById('themeToggle');
    const body = document.body;
    
    // التحقق من التفضيل المحفوظ
    const savedTheme = localStorage.getItem('theme');
    if (savedTheme === 'dark') {
      body.classList.add('dark-mode');
      themeToggle.innerHTML = '<i class="fas fa-sun"></i>';
    }
    
    // إضافة مستمع الحدث
    themeToggle.addEventListener('click', () => {
      body.classList.toggle('dark-mode');
      
      if (body.classList.contains('dark-mode')) {
        localStorage.setItem('theme', 'dark');
        themeToggle.innerHTML = '<i class="fas fa-sun"></i>';
      } else {
        localStorage.setItem('theme', 'light');
        themeToggle.innerHTML = '<i class="fas fa-moon"></i>';
      }
    });
  }

  // الوظيفة الجديدة: طي القوالب عند التحميل
  function initCardToggles() {
  const toggleButtons = document.querySelectorAll('.toggle-cards');
  
  toggleButtons.forEach(button => {
    const targetId = button.getAttribute('data-target');
    const cardsContainer = document.getElementById(targetId);
    
    if (cardsContainer) {
      // --- بداية الإضافة ---
      // اجعل كل البطاقات مغلقة عند تحميل الصفحة
      cardsContainer.classList.add('collapsed');
      button.classList.add('collapsed');
      // --- نهاية الإضافة ---

      // إضافة حدث النقر للفتح والإغلاق
      button.addEventListener('click', () => {
        cardsContainer.classList.toggle('collapsed');
        button.classList.toggle('collapsed');

        // تعديل بسيط لتحسين تجربة الفتح
        if (!cardsContainer.classList.contains('collapsed')) {
            cardsContainer.style.paddingTop = '0.8rem'; // إعادة الهامش العلوي عند الفتح
            cardsContainer.style.paddingBottom = '0.8rem';
        } else {
            cardsContainer.style.paddingTop = '0';
            cardsContainer.style.paddingBottom = '0';
        }
      });
    }
  });
}


  // تهيئة جميع الوظائف الجديدة
  document.addEventListener('DOMContentLoaded', function() {
    initThemeToggle();
    initCardToggles();
  });
 // === بداية كود تشغيل نافذة الاستفسارات المنبثقة ===

document.addEventListener('DOMContentLoaded', function() {
  
  // 1. تحديد العناصر التي سنتعامل معها
  const openModalBtn = document.getElementById('openInquiryModalBtn');
  const closeModalBtn = document.getElementById('closeInquiryModalBtn');
  const modalOverlay = document.getElementById('inquiryModal');

  // 2. وظيفة لفتح النافذة المنبثقة
  function openModal() {
    if (modalOverlay) {
      modalOverlay.style.display = 'flex'; // استخدام display بدلاً من class
      setTimeout(() => { // تأخير بسيط للسماح بحدوث transition
        modalOverlay.classList.add('visible');
      }, 10);
    }
  }

  // 3. وظيفة لإغلاق النافذة المنبثقة
  function closeModal() {
    if (modalOverlay) {
      modalOverlay.classList.remove('visible');
      // الانتظار حتى انتهاء تأثير الاختفاء ثم تغيير display
      setTimeout(() => {
        modalOverlay.style.display = 'none';
      }, 300); // 300ms هو نفس مدة الـ transition في CSS
    }
  }

  // 4. ربط الأحداث بالعناصر
  if (openModalBtn) {
    openModalBtn.addEventListener('click', openModal);
  }

  if (closeModalBtn) {
    closeModalBtn.addEventListener('click', closeModal);
  }

  // 5. إغلاق النافذة عند النقر على الخلفية المعتمة
  if (modalOverlay) {
    modalOverlay.addEventListener('click', function(event) {
      if (event.target === modalOverlay) {
        closeModal();
      }
    });
  }

});

// === نهاية كود تشغيل نافذة الاستفسارات المنبثقة ===

// === كود تفعيل الأيقونات (+) في شريط التميز ===

document.addEventListener('DOMContentLoaded', function() {
  const studentItems = document.querySelectorAll('.student-item');
  
  studentItems.forEach(item => {
    const toggleBtn = item.querySelector('.info-toggle-btn');
    const studentInfo = item.querySelector('.student-info');
    
    if (toggleBtn && studentInfo) {
      // فتح/إغلاق عند النقر على الزر
      toggleBtn.addEventListener('click', function(e) {
        e.stopPropagation();
        
        // إغلاق جميع العناصر الأخرى
        studentItems.forEach(otherItem => {
          if (otherItem !== item && otherItem.classList.contains('active')) {
            otherItem.classList.remove('active');
          }
        });
        
        // تبديل حالة العنصر الحالي
        item.classList.toggle('active');
        
        // تغيير الأيقونة
        if (item.classList.contains('active')) {
          toggleBtn.innerHTML = '<i class="fas fa-times"></i>';
          toggleBtn.setAttribute('aria-label', 'إغلاق المعلومات');
        } else {
          toggleBtn.innerHTML = '<i class="fas fa-plus"></i>';
          toggleBtn.setAttribute('aria-label', 'إظهار المعلومات');
        }
      });
      
      // إغلاق عند النقر خارج الصندوق
      document.addEventListener('click', function(e) {
        if (!item.contains(e.target) && item.classList.contains('active')) {
          item.classList.remove('active');
          toggleBtn.innerHTML = '<i class="fas fa-plus"></i>';
          toggleBtn.setAttribute('aria-label', 'إظهار المعلومات');
        }
      });
      
      // إغلاق عند الضغط على زر Escape
      document.addEventListener('keydown', function(e) {
        if (e.key === 'Escape' && item.classList.contains('active')) {
          item.classList.remove('active');
          toggleBtn.innerHTML = '<i class="fas fa-plus"></i>';
          toggleBtn.setAttribute('aria-label', 'إظهار المعلومات');
        }
      });
    }
  });
  
  // إضافة تأثيرات للتمرير على الجوال
  studentItems.forEach(item => {
    item.addEventListener('touchstart', function() {
      this.classList.add('touched');
    }, { passive: true });
    
    item.addEventListener('touchend', function() {
      setTimeout(() => {
        this.classList.remove('touched');
      }, 300);
    }, { passive: true });
  });
});
</script>
</body>
</html>
